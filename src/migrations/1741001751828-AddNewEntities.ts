import { MigrationInterface, QueryRunner } from "typeorm";

export class AddNewEntities1741001751828 implements MigrationInterface {
    name = 'AddNewEntities1741001751828'

    public async up(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`ALTER TABLE "tasks" DROP CONSTRAINT "FK_9a16d2c86252529f622fa53f1e3"`);
        await queryRunner.query(`DROP INDEX "IDX_users_email" ON "users"`);
        await queryRunner.query(`CREATE TABLE "tags" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_e7dc17249a1148a1970748eda99" DEFAULT NEWSEQUENTIALID(), "name" nvarchar(255) NOT NULL, "color" varchar(255), "createdAt" datetime2 NOT NULL CONSTRAINT "DF_1fb7419851083e5aa1d1a0c3cc7" DEFAULT getdate(), "updatedAt" datetime2 NOT NULL CONSTRAINT "DF_179dd43442b344e481c60c101a8" DEFAULT getdate(), CONSTRAINT "UQ_d90243459a697eadb8ad56e9092" UNIQUE ("name"), CONSTRAINT "PK_e7dc17249a1148a1970748eda99" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "teams" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_7e5523774a38b08a6236d322403" DEFAULT NEWSEQUENTIALID(), "name" nvarchar(255) NOT NULL, "description" text, "createdAt" datetime2 NOT NULL CONSTRAINT "DF_a9ff9afa3a94c4032985300b9f0" DEFAULT getdate(), "updatedAt" datetime2 NOT NULL CONSTRAINT "DF_0d6d3684a667d25ffedd81b9f2c" DEFAULT getdate(), "ownerId" uniqueidentifier, CONSTRAINT "PK_7e5523774a38b08a6236d322403" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "permissions" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_920331560282b8bd21bb02290df" DEFAULT NEWSEQUENTIALID(), "name" nvarchar(255) NOT NULL, "description" text, "resource" nvarchar(255) NOT NULL, "action" nvarchar(255) NOT NULL, "createdAt" datetime2 NOT NULL CONSTRAINT "DF_da04f89054f39981438894dfe30" DEFAULT getdate(), "updatedAt" datetime2 NOT NULL CONSTRAINT "DF_14936cb23d7de4c7b31b5cef053" DEFAULT getdate(), CONSTRAINT "UQ_48ce552495d14eae9b187bb6716" UNIQUE ("name"), CONSTRAINT "PK_920331560282b8bd21bb02290df" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "roles" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_c1433d71a4838793a49dcad46ab" DEFAULT NEWSEQUENTIALID(), "name" nvarchar(255) NOT NULL, "description" text, "createdAt" datetime2 NOT NULL CONSTRAINT "DF_4d018866397b1e7e78d03b45662" DEFAULT getdate(), "updatedAt" datetime2 NOT NULL CONSTRAINT "DF_c13070745ded32a88c920015f7e" DEFAULT getdate(), CONSTRAINT "UQ_648e3f5447f725579d7d4ffdfb7" UNIQUE ("name"), CONSTRAINT "PK_c1433d71a4838793a49dcad46ab" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "comments" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_8bf68bc960f2b69e818bdb90dcb" DEFAULT NEWSEQUENTIALID(), "content" text NOT NULL, "targetType" varchar(255) CONSTRAINT CHK_e2be905622d4a7d64823ffc04e_ENUM CHECK(targetType IN ('project','task')) NOT NULL, "projectId" uniqueidentifier, "taskId" uniqueidentifier, "createdAt" datetime2 NOT NULL CONSTRAINT "DF_94ffa05f2fb3da114904ba901bd" DEFAULT getdate(), "updatedAt" datetime2 NOT NULL CONSTRAINT "DF_4a2de01dd822709aef7b2620946" DEFAULT getdate(), "authorId" uniqueidentifier, CONSTRAINT "PK_8bf68bc960f2b69e818bdb90dcb" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "attachments" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_5e1f050bcff31e3084a1d662412" DEFAULT NEWSEQUENTIALID(), "filename" nvarchar(255) NOT NULL, "originalFilename" nvarchar(255) NOT NULL, "mimeType" nvarchar(255) NOT NULL, "size" bigint NOT NULL, "path" varchar(255), "targetType" varchar(255) CONSTRAINT CHK_ef13a7fdab05547533c3a1582f_ENUM CHECK(targetType IN ('project','task')) NOT NULL, "projectId" uniqueidentifier, "taskId" uniqueidentifier, "createdAt" datetime2 NOT NULL CONSTRAINT "DF_8df7f2e80f016ffd718f52a0849" DEFAULT getdate(), "updatedAt" datetime2 NOT NULL CONSTRAINT "DF_bf749eab69271624fceb75d9026" DEFAULT getdate(), "uploaderId" uniqueidentifier, CONSTRAINT "PK_5e1f050bcff31e3084a1d662412" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "time_entries" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_b8bc5f10269ba2fe88708904aa0" DEFAULT NEWSEQUENTIALID(), "startTime" datetime2 NOT NULL, "endTime" datetime2, "duration" float NOT NULL CONSTRAINT "DF_99744aef5b0ffc8061afbebf6bb" DEFAULT 0, "description" text, "isBillable" bit NOT NULL CONSTRAINT "DF_f44e3e834d02df7e9b657fbce9c" DEFAULT 0, "createdAt" datetime2 NOT NULL CONSTRAINT "DF_d84ef592567cee97eb1e64abf1e" DEFAULT getdate(), "updatedAt" datetime2 NOT NULL CONSTRAINT "DF_bed85da5f3e0a1713c622fa112e" DEFAULT getdate(), "userId" uniqueidentifier, "taskId" uniqueidentifier, "projectId" uniqueidentifier, CONSTRAINT "PK_b8bc5f10269ba2fe88708904aa0" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "notifications" ("id" uniqueidentifier NOT NULL CONSTRAINT "DF_6a72c3c0f683f6462415e653c3a" DEFAULT NEWSEQUENTIALID(), "type" varchar(255) CONSTRAINT CHK_e4fae6e72b66d469e7e2a5dba7_ENUM CHECK(type IN ('project_assigned','project_updated','task_assigned','task_updated','comment_added','deadline_approaching')) NOT NULL, "message" nvarchar(255) NOT NULL, "isRead" bit NOT NULL CONSTRAINT "DF_8ba28344602d583583b9ea1a500" DEFAULT 0, "projectId" uniqueidentifier, "taskId" uniqueidentifier, "createdAt" datetime2 NOT NULL CONSTRAINT "DF_831a5a06f879fb0bebf89658713" DEFAULT getdate(), "updatedAt" datetime2 NOT NULL CONSTRAINT "DF_ac27b070934c64650ab339f4c6d" DEFAULT getdate(), "userId" uniqueidentifier, CONSTRAINT "PK_6a72c3c0f683f6462415e653c3a" PRIMARY KEY ("id"))`);
        await queryRunner.query(`CREATE TABLE "project_tags" ("tagId" uniqueidentifier NOT NULL, "projectId" uniqueidentifier NOT NULL, CONSTRAINT "PK_348a788aabc2b5440dbc0153f60" PRIMARY KEY ("tagId", "projectId"))`);
        await queryRunner.query(`CREATE INDEX "IDX_f32b78c2affb2ff0556eee81b2" ON "project_tags" ("tagId") `);
        await queryRunner.query(`CREATE INDEX "IDX_eabf9838b75eb417af9ccd37bf" ON "project_tags" ("projectId") `);
        await queryRunner.query(`CREATE TABLE "task_tags" ("tagId" uniqueidentifier NOT NULL, "taskId" uniqueidentifier NOT NULL, CONSTRAINT "PK_20be04cfd9558da670ed177211d" PRIMARY KEY ("tagId", "taskId"))`);
        await queryRunner.query(`CREATE INDEX "IDX_ac1cfe87c11bc138ee8675cff3" ON "task_tags" ("tagId") `);
        await queryRunner.query(`CREATE INDEX "IDX_1470ad368e79cb5636163a4bf8" ON "task_tags" ("taskId") `);
        await queryRunner.query(`CREATE TABLE "team_members" ("teamId" uniqueidentifier NOT NULL, "userId" uniqueidentifier NOT NULL, CONSTRAINT "PK_b2f17b533905e0a94390c5e2208" PRIMARY KEY ("teamId", "userId"))`);
        await queryRunner.query(`CREATE INDEX "IDX_6d1c8c7f705803f0711336a5c3" ON "team_members" ("teamId") `);
        await queryRunner.query(`CREATE INDEX "IDX_0a72b849753a046462b4c5a8ec" ON "team_members" ("userId") `);
        await queryRunner.query(`CREATE TABLE "role_permissions" ("roleId" uniqueidentifier NOT NULL, "permissionId" uniqueidentifier NOT NULL, CONSTRAINT "PK_d430a02aad006d8a70f3acd7d03" PRIMARY KEY ("roleId", "permissionId"))`);
        await queryRunner.query(`CREATE INDEX "IDX_b4599f8b8f548d35850afa2d12" ON "role_permissions" ("roleId") `);
        await queryRunner.query(`CREATE INDEX "IDX_06792d0c62ce6b0203c03643cd" ON "role_permissions" ("permissionId") `);
        await queryRunner.query(`CREATE TABLE "user_roles" ("userId" uniqueidentifier NOT NULL, "roleId" uniqueidentifier NOT NULL, CONSTRAINT "PK_88481b0c4ed9ada47e9fdd67475" PRIMARY KEY ("userId", "roleId"))`);
        await queryRunner.query(`CREATE INDEX "IDX_472b25323af01488f1f66a06b6" ON "user_roles" ("userId") `);
        await queryRunner.query(`CREATE INDEX "IDX_86033897c009fcca8b6505d6be" ON "user_roles" ("roleId") `);
        await queryRunner.query(`ALTER TABLE "projects" ADD "teamId" uniqueidentifier`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP CONSTRAINT "FK_e08fca67ca8966e6b9914bf2956"`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP CONSTRAINT "FK_90bc62e96b48a437a78593f78f0"`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP COLUMN "title"`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD "title" nvarchar(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP CONSTRAINT "DF_6086c8dafbae729a930c04d8651"`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP COLUMN "status"`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD "status" varchar(255) CONSTRAINT CHK_2131d1b74f06e0635a3c26eb00_ENUM CHECK(status IN ('pending','in_progress','completed')) NOT NULL CONSTRAINT "DF_6086c8dafbae729a930c04d8651" DEFAULT 'pending'`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP CONSTRAINT "DF_bd213ab7fa55f02309c5f23bbc3"`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP COLUMN "priority"`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD "priority" varchar(255) CONSTRAINT CHK_22301c74394b7794f656ee8856_ENUM CHECK(priority IN ('low','medium','high')) NOT NULL CONSTRAINT "DF_bd213ab7fa55f02309c5f23bbc3" DEFAULT 'medium'`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP COLUMN "dueDate"`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD "dueDate" datetime2`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP CONSTRAINT "DF_9892cddd7cc095150685bc426ae"`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP COLUMN "progress"`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD "progress" float NOT NULL CONSTRAINT "DF_9892cddd7cc095150685bc426ae" DEFAULT 0`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP CONSTRAINT "DF_a10f84213e3173cb41624d7e6d8"`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP COLUMN "estimatedHours"`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD "estimatedHours" float`);
        await queryRunner.query(`ALTER TABLE "tasks" ALTER COLUMN "projectId" uniqueidentifier`);
        await queryRunner.query(`ALTER TABLE "tasks" ALTER COLUMN "creatorId" uniqueidentifier`);
        await queryRunner.query(`ALTER TABLE "projects" DROP CONSTRAINT "FK_a8e7e6c3f9d9528ed35fe5bae33"`);
        await queryRunner.query(`ALTER TABLE "projects" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "projects" ADD "name" nvarchar(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "projects" DROP CONSTRAINT "DF_a27865a7be17886e3088f4a6509"`);
        await queryRunner.query(`ALTER TABLE "projects" DROP COLUMN "status"`);
        await queryRunner.query(`ALTER TABLE "projects" ADD "status" varchar(255) CONSTRAINT CHK_f100303a65ea60db6a08f8646f_ENUM CHECK(status IN ('planning','active','completed','on_hold')) NOT NULL CONSTRAINT "DF_a27865a7be17886e3088f4a6509" DEFAULT 'planning'`);
        await queryRunner.query(`ALTER TABLE "projects" DROP CONSTRAINT "DF_bbcce409ce9ab4d8c65b0c89299"`);
        await queryRunner.query(`ALTER TABLE "projects" DROP COLUMN "priority"`);
        await queryRunner.query(`ALTER TABLE "projects" ADD "priority" varchar(255) CONSTRAINT CHK_f8c8ffd78c0cf29aebbeee2238_ENUM CHECK(priority IN ('low','medium','high')) NOT NULL CONSTRAINT "DF_bbcce409ce9ab4d8c65b0c89299" DEFAULT 'medium'`);
        await queryRunner.query(`ALTER TABLE "projects" DROP COLUMN "startDate"`);
        await queryRunner.query(`ALTER TABLE "projects" ADD "startDate" datetime2 NOT NULL`);
        await queryRunner.query(`ALTER TABLE "projects" DROP COLUMN "dueDate"`);
        await queryRunner.query(`ALTER TABLE "projects" ADD "dueDate" datetime2 NOT NULL`);
        await queryRunner.query(`ALTER TABLE "projects" DROP CONSTRAINT "DF_12342b33dbc1976b3cbdc1a1205"`);
        await queryRunner.query(`ALTER TABLE "projects" DROP COLUMN "progress"`);
        await queryRunner.query(`ALTER TABLE "projects" ADD "progress" float NOT NULL CONSTRAINT "DF_12342b33dbc1976b3cbdc1a1205" DEFAULT 0`);
        await queryRunner.query(`ALTER TABLE "projects" ALTER COLUMN "ownerId" uniqueidentifier`);
        await queryRunner.query(`ALTER TABLE "users" DROP CONSTRAINT "UQ_97672ac88f789774dd47f7c8be3"`);
        await queryRunner.query(`ALTER TABLE "users" DROP COLUMN "email"`);
        await queryRunner.query(`ALTER TABLE "users" ADD "email" nvarchar(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "users" ADD CONSTRAINT "UQ_97672ac88f789774dd47f7c8be3" UNIQUE ("email")`);
        await queryRunner.query(`ALTER TABLE "users" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "users" ADD "name" nvarchar(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "users" DROP COLUMN "password"`);
        await queryRunner.query(`ALTER TABLE "users" ADD "password" nvarchar(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD CONSTRAINT "FK_e08fca67ca8966e6b9914bf2956" FOREIGN KEY ("projectId") REFERENCES "projects"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD CONSTRAINT "FK_9a16d2c86252529f622fa53f1e3" FOREIGN KEY ("assigneeId") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD CONSTRAINT "FK_90bc62e96b48a437a78593f78f0" FOREIGN KEY ("creatorId") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "teams" ADD CONSTRAINT "FK_b5ebe13256317503931ecabb556" FOREIGN KEY ("ownerId") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "projects" ADD CONSTRAINT "FK_a8e7e6c3f9d9528ed35fe5bae33" FOREIGN KEY ("ownerId") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "projects" ADD CONSTRAINT "FK_2f789e58a882d8dd5b936c747c2" FOREIGN KEY ("teamId") REFERENCES "teams"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "comments" ADD CONSTRAINT "FK_4548cc4a409b8651ec75f70e280" FOREIGN KEY ("authorId") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "comments" ADD CONSTRAINT "FK_266dea9aee3073a8a5e4d92845f" FOREIGN KEY ("projectId") REFERENCES "projects"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "comments" ADD CONSTRAINT "FK_9adf2d3106c6dc87d6262ccadfe" FOREIGN KEY ("taskId") REFERENCES "tasks"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "attachments" ADD CONSTRAINT "FK_b8f8cb9f55776d30ebd6dc779ee" FOREIGN KEY ("uploaderId") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "attachments" ADD CONSTRAINT "FK_9f84e7261b527273134325522e1" FOREIGN KEY ("projectId") REFERENCES "projects"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "attachments" ADD CONSTRAINT "FK_65152e15d915ebe1294160bd1d3" FOREIGN KEY ("taskId") REFERENCES "tasks"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "time_entries" ADD CONSTRAINT "FK_d1b452d7f0d45863303b7d30000" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "time_entries" ADD CONSTRAINT "FK_8cfb57662e88d7c65010311661d" FOREIGN KEY ("taskId") REFERENCES "tasks"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "time_entries" ADD CONSTRAINT "FK_f051d95ecf3cd671445ef0c9be8" FOREIGN KEY ("projectId") REFERENCES "projects"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "notifications" ADD CONSTRAINT "FK_692a909ee0fa9383e7859f9b406" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "notifications" ADD CONSTRAINT "FK_124708b9c8bc9778d960799e3e0" FOREIGN KEY ("projectId") REFERENCES "projects"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "notifications" ADD CONSTRAINT "FK_ec4858ee62e0008aaa1dcb95c8f" FOREIGN KEY ("taskId") REFERENCES "tasks"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "project_tags" ADD CONSTRAINT "FK_f32b78c2affb2ff0556eee81b28" FOREIGN KEY ("tagId") REFERENCES "tags"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "project_tags" ADD CONSTRAINT "FK_eabf9838b75eb417af9ccd37bfc" FOREIGN KEY ("projectId") REFERENCES "projects"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "task_tags" ADD CONSTRAINT "FK_ac1cfe87c11bc138ee8675cff3c" FOREIGN KEY ("tagId") REFERENCES "tags"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "task_tags" ADD CONSTRAINT "FK_1470ad368e79cb5636163a4bf8d" FOREIGN KEY ("taskId") REFERENCES "tasks"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "team_members" ADD CONSTRAINT "FK_6d1c8c7f705803f0711336a5c33" FOREIGN KEY ("teamId") REFERENCES "teams"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "team_members" ADD CONSTRAINT "FK_0a72b849753a046462b4c5a8ec2" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "role_permissions" ADD CONSTRAINT "FK_b4599f8b8f548d35850afa2d12c" FOREIGN KEY ("roleId") REFERENCES "roles"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "role_permissions" ADD CONSTRAINT "FK_06792d0c62ce6b0203c03643cdd" FOREIGN KEY ("permissionId") REFERENCES "permissions"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "user_roles" ADD CONSTRAINT "FK_472b25323af01488f1f66a06b67" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE CASCADE ON UPDATE CASCADE`);
        await queryRunner.query(`ALTER TABLE "user_roles" ADD CONSTRAINT "FK_86033897c009fcca8b6505d6be2" FOREIGN KEY ("roleId") REFERENCES "roles"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
    }

    public async down(queryRunner: QueryRunner): Promise<void> {
        await queryRunner.query(`ALTER TABLE "user_roles" DROP CONSTRAINT "FK_86033897c009fcca8b6505d6be2"`);
        await queryRunner.query(`ALTER TABLE "user_roles" DROP CONSTRAINT "FK_472b25323af01488f1f66a06b67"`);
        await queryRunner.query(`ALTER TABLE "role_permissions" DROP CONSTRAINT "FK_06792d0c62ce6b0203c03643cdd"`);
        await queryRunner.query(`ALTER TABLE "role_permissions" DROP CONSTRAINT "FK_b4599f8b8f548d35850afa2d12c"`);
        await queryRunner.query(`ALTER TABLE "team_members" DROP CONSTRAINT "FK_0a72b849753a046462b4c5a8ec2"`);
        await queryRunner.query(`ALTER TABLE "team_members" DROP CONSTRAINT "FK_6d1c8c7f705803f0711336a5c33"`);
        await queryRunner.query(`ALTER TABLE "task_tags" DROP CONSTRAINT "FK_1470ad368e79cb5636163a4bf8d"`);
        await queryRunner.query(`ALTER TABLE "task_tags" DROP CONSTRAINT "FK_ac1cfe87c11bc138ee8675cff3c"`);
        await queryRunner.query(`ALTER TABLE "project_tags" DROP CONSTRAINT "FK_eabf9838b75eb417af9ccd37bfc"`);
        await queryRunner.query(`ALTER TABLE "project_tags" DROP CONSTRAINT "FK_f32b78c2affb2ff0556eee81b28"`);
        await queryRunner.query(`ALTER TABLE "notifications" DROP CONSTRAINT "FK_ec4858ee62e0008aaa1dcb95c8f"`);
        await queryRunner.query(`ALTER TABLE "notifications" DROP CONSTRAINT "FK_124708b9c8bc9778d960799e3e0"`);
        await queryRunner.query(`ALTER TABLE "notifications" DROP CONSTRAINT "FK_692a909ee0fa9383e7859f9b406"`);
        await queryRunner.query(`ALTER TABLE "time_entries" DROP CONSTRAINT "FK_f051d95ecf3cd671445ef0c9be8"`);
        await queryRunner.query(`ALTER TABLE "time_entries" DROP CONSTRAINT "FK_8cfb57662e88d7c65010311661d"`);
        await queryRunner.query(`ALTER TABLE "time_entries" DROP CONSTRAINT "FK_d1b452d7f0d45863303b7d30000"`);
        await queryRunner.query(`ALTER TABLE "attachments" DROP CONSTRAINT "FK_65152e15d915ebe1294160bd1d3"`);
        await queryRunner.query(`ALTER TABLE "attachments" DROP CONSTRAINT "FK_9f84e7261b527273134325522e1"`);
        await queryRunner.query(`ALTER TABLE "attachments" DROP CONSTRAINT "FK_b8f8cb9f55776d30ebd6dc779ee"`);
        await queryRunner.query(`ALTER TABLE "comments" DROP CONSTRAINT "FK_9adf2d3106c6dc87d6262ccadfe"`);
        await queryRunner.query(`ALTER TABLE "comments" DROP CONSTRAINT "FK_266dea9aee3073a8a5e4d92845f"`);
        await queryRunner.query(`ALTER TABLE "comments" DROP CONSTRAINT "FK_4548cc4a409b8651ec75f70e280"`);
        await queryRunner.query(`ALTER TABLE "projects" DROP CONSTRAINT "FK_2f789e58a882d8dd5b936c747c2"`);
        await queryRunner.query(`ALTER TABLE "projects" DROP CONSTRAINT "FK_a8e7e6c3f9d9528ed35fe5bae33"`);
        await queryRunner.query(`ALTER TABLE "teams" DROP CONSTRAINT "FK_b5ebe13256317503931ecabb556"`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP CONSTRAINT "FK_90bc62e96b48a437a78593f78f0"`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP CONSTRAINT "FK_9a16d2c86252529f622fa53f1e3"`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP CONSTRAINT "FK_e08fca67ca8966e6b9914bf2956"`);
        await queryRunner.query(`ALTER TABLE "users" DROP COLUMN "password"`);
        await queryRunner.query(`ALTER TABLE "users" ADD "password" varchar(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "users" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "users" ADD "name" varchar(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "users" DROP CONSTRAINT "UQ_97672ac88f789774dd47f7c8be3"`);
        await queryRunner.query(`ALTER TABLE "users" DROP COLUMN "email"`);
        await queryRunner.query(`ALTER TABLE "users" ADD "email" varchar(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "users" ADD CONSTRAINT "UQ_97672ac88f789774dd47f7c8be3" UNIQUE ("email")`);
        await queryRunner.query(`ALTER TABLE "projects" ALTER COLUMN "ownerId" uniqueidentifier NOT NULL`);
        await queryRunner.query(`ALTER TABLE "projects" DROP CONSTRAINT "DF_12342b33dbc1976b3cbdc1a1205"`);
        await queryRunner.query(`ALTER TABLE "projects" DROP COLUMN "progress"`);
        await queryRunner.query(`ALTER TABLE "projects" ADD "progress" decimal(5,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "projects" ADD CONSTRAINT "DF_12342b33dbc1976b3cbdc1a1205" DEFAULT 0 FOR "progress"`);
        await queryRunner.query(`ALTER TABLE "projects" DROP COLUMN "dueDate"`);
        await queryRunner.query(`ALTER TABLE "projects" ADD "dueDate" date NOT NULL`);
        await queryRunner.query(`ALTER TABLE "projects" DROP COLUMN "startDate"`);
        await queryRunner.query(`ALTER TABLE "projects" ADD "startDate" date NOT NULL`);
        await queryRunner.query(`ALTER TABLE "projects" DROP CONSTRAINT "DF_bbcce409ce9ab4d8c65b0c89299"`);
        await queryRunner.query(`ALTER TABLE "projects" DROP COLUMN "priority"`);
        await queryRunner.query(`ALTER TABLE "projects" ADD "priority" varchar(50) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "projects" ADD CONSTRAINT "DF_bbcce409ce9ab4d8c65b0c89299" DEFAULT 'medium' FOR "priority"`);
        await queryRunner.query(`ALTER TABLE "projects" DROP CONSTRAINT "DF_a27865a7be17886e3088f4a6509"`);
        await queryRunner.query(`ALTER TABLE "projects" DROP COLUMN "status"`);
        await queryRunner.query(`ALTER TABLE "projects" ADD "status" varchar(50) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "projects" ADD CONSTRAINT "DF_a27865a7be17886e3088f4a6509" DEFAULT 'planning' FOR "status"`);
        await queryRunner.query(`ALTER TABLE "projects" DROP COLUMN "name"`);
        await queryRunner.query(`ALTER TABLE "projects" ADD "name" varchar(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "projects" ADD CONSTRAINT "FK_a8e7e6c3f9d9528ed35fe5bae33" FOREIGN KEY ("ownerId") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "tasks" ALTER COLUMN "creatorId" uniqueidentifier NOT NULL`);
        await queryRunner.query(`ALTER TABLE "tasks" ALTER COLUMN "projectId" uniqueidentifier NOT NULL`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP COLUMN "estimatedHours"`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD "estimatedHours" int NOT NULL`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD CONSTRAINT "DF_a10f84213e3173cb41624d7e6d8" DEFAULT 0 FOR "estimatedHours"`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP CONSTRAINT "DF_9892cddd7cc095150685bc426ae"`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP COLUMN "progress"`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD "progress" decimal(5,2) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD CONSTRAINT "DF_9892cddd7cc095150685bc426ae" DEFAULT 0 FOR "progress"`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP COLUMN "dueDate"`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD "dueDate" date`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP CONSTRAINT "DF_bd213ab7fa55f02309c5f23bbc3"`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP COLUMN "priority"`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD "priority" varchar(50) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD CONSTRAINT "DF_bd213ab7fa55f02309c5f23bbc3" DEFAULT 'medium' FOR "priority"`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP CONSTRAINT "DF_6086c8dafbae729a930c04d8651"`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP COLUMN "status"`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD "status" varchar(50) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD CONSTRAINT "DF_6086c8dafbae729a930c04d8651" DEFAULT 'todo' FOR "status"`);
        await queryRunner.query(`ALTER TABLE "tasks" DROP COLUMN "title"`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD "title" varchar(255) NOT NULL`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD CONSTRAINT "FK_90bc62e96b48a437a78593f78f0" FOREIGN KEY ("creatorId") REFERENCES "users"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "tasks" ADD CONSTRAINT "FK_e08fca67ca8966e6b9914bf2956" FOREIGN KEY ("projectId") REFERENCES "projects"("id") ON DELETE CASCADE ON UPDATE NO ACTION`);
        await queryRunner.query(`ALTER TABLE "projects" DROP COLUMN "teamId"`);
        await queryRunner.query(`DROP INDEX "IDX_86033897c009fcca8b6505d6be" ON "user_roles"`);
        await queryRunner.query(`DROP INDEX "IDX_472b25323af01488f1f66a06b6" ON "user_roles"`);
        await queryRunner.query(`DROP TABLE "user_roles"`);
        await queryRunner.query(`DROP INDEX "IDX_06792d0c62ce6b0203c03643cd" ON "role_permissions"`);
        await queryRunner.query(`DROP INDEX "IDX_b4599f8b8f548d35850afa2d12" ON "role_permissions"`);
        await queryRunner.query(`DROP TABLE "role_permissions"`);
        await queryRunner.query(`DROP INDEX "IDX_0a72b849753a046462b4c5a8ec" ON "team_members"`);
        await queryRunner.query(`DROP INDEX "IDX_6d1c8c7f705803f0711336a5c3" ON "team_members"`);
        await queryRunner.query(`DROP TABLE "team_members"`);
        await queryRunner.query(`DROP INDEX "IDX_1470ad368e79cb5636163a4bf8" ON "task_tags"`);
        await queryRunner.query(`DROP INDEX "IDX_ac1cfe87c11bc138ee8675cff3" ON "task_tags"`);
        await queryRunner.query(`DROP TABLE "task_tags"`);
        await queryRunner.query(`DROP INDEX "IDX_eabf9838b75eb417af9ccd37bf" ON "project_tags"`);
        await queryRunner.query(`DROP INDEX "IDX_f32b78c2affb2ff0556eee81b2" ON "project_tags"`);
        await queryRunner.query(`DROP TABLE "project_tags"`);
        await queryRunner.query(`DROP TABLE "notifications"`);
        await queryRunner.query(`DROP TABLE "time_entries"`);
        await queryRunner.query(`DROP TABLE "attachments"`);
        await queryRunner.query(`DROP TABLE "comments"`);
        await queryRunner.query(`DROP TABLE "roles"`);
        await queryRunner.query(`DROP TABLE "permissions"`);
        await queryRunner.query(`DROP TABLE "teams"`);
        await queryRunner.query(`DROP TABLE "tags"`);
        await queryRunner.query(`CREATE UNIQUE INDEX "IDX_users_email" ON "users" ("email") `);
        await queryRunner.query(`ALTER TABLE "tasks" ADD CONSTRAINT "FK_9a16d2c86252529f622fa53f1e3" FOREIGN KEY ("assigneeId") REFERENCES "users"("id") ON DELETE SET NULL ON UPDATE NO ACTION`);
    }

}
